<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Control de Gastos Personales</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            color: #333;
        }
        h1 {
            color: #2c3e50;
            text-align: center;
        }
        .header-section {
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 20px;
            padding: 15px;
            background-color: #f8f9fa;
            border-radius: 5px;
        }
        .input-group {
            display: flex;
            flex-direction: column;
            min-width: 200px;
        }
        label {
            margin-bottom: 5px;
            font-weight: bold;
        }
        input, select {
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 10px;
            text-align: left;
        }
        th {
            background-color: #f2f2f2;
        }
        tr:nth-child(even) {
            background-color: #f9f9f9;
        }
        input[type="number"], input[type="date"], input[type="text"] {
            width: 100%;
            box-sizing: border-box;
        }
        .positive {
            color: green;
            font-weight: bold;
        }
        .negative {
            color: red;
            font-weight: bold;
        }
        .summary {
            display: flex;
            justify-content: space-around;
            margin-top: 20px;
            padding: 15px;
            background-color: #e9ecef;
            border-radius: 5px;
        }
        .summary-item {
            text-align: center;
        }
        .summary-value {
            font-size: 1.2em;
            font-weight: bold;
        }
        button {
            padding: 10px 15px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background-color: #45a049;
        }
        .button-group {
            text-align: center;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <h1>游눯 Control de Gastos Mensuales</h1>
    
    <div class="header-section">
        <div class="input-group">
            <label for="mes">Mes:</label>
            <select id="mes" onchange="cambiarMes()">
                <option value="1">Enero</option>
                <option value="2">Febrero</option>
                <option value="3">Marzo</option>
                <option value="4">Abril</option>
                <option value="5">Mayo</option>
                <option value="6">Junio</option>
                <option value="7">Julio</option>
                <option value="8">Agosto</option>
                <option value="9">Septiembre</option>
                <option value="10">Octubre</option>
                <option value="11">Noviembre</option>
                <option value="12">Diciembre</option>
            </select>
        </div>
        
        <div class="input-group">
            <label for="anio">A침o:</label>
            <input type="number" id="anio" min="2020" max="2030" value="2023" onchange="cambiarMes()">
        </div>
        
        <div class="input-group">
            <label for="remuneracion">Remuneraci칩n:</label>
            <input type="number" id="remuneracion" step="0.01" value="0" onchange="calcularTotales()">
        </div>
    </div>
    
    <table id="tablaGastos">
        <thead>
            <tr>
                <th>Categor칤a</th>
                <th>Monto</th>
                <th>Pagado</th>
                <th>Fecha</th>
                <th>Notas</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>LUZ</td>
                <td><input type="number" class="monto" step="0.01" value="0" onchange="calcularTotales()"></td>
                <td><input type="checkbox" class="pagado"></td>
                <td><input type="date" class="fecha"></td>
                <td><input type="text" class="notas"></td>
            </tr>
            <tr>
                <td>AGUA</td>
                <td><input type="number" class="monto" step="0.01" value="0" onchange="calcularTotales()"></td>
                <td><input type="checkbox" class="pagado"></td>
                <td><input type="date" class="fecha"></td>
                <td><input type="text" class="notas"></td>
            </tr>
            <tr>
                <td>GAS</td>
                <td><input type="number" class="monto" step="0.01" value="0" onchange="calcularTotales()"></td>
                <td><input type="checkbox" class="pagado"></td>
                <td><input type="date" class="fecha"></td>
                <td><input type="text" class="notas"></td>
            </tr>
            <tr>
                <td>TELEFONO</td>
                <td><input type="number" class="monto" step="0.01" value="0" onchange="calcularTotales()"></td>
                <td><input type="checkbox" class="pagado"></td>
                <td><input type="date" class="fecha"></td>
                <td><input type="text" class="notas"></td>
            </tr>
            <tr>
                <td>INTERNET</td>
                <td><input type="number" class="monto" step="0.01" value="0" onchange="calcularTotales()"></td>
                <td><input type="checkbox" class="pagado"></td>
                <td><input type="date" class="fecha"></td>
                <td><input type="text" class="notas"></td>
            </tr>
            <tr>
                <td>COMIDA PARA GATOS</td>
                <td><input type="number" class="monto" step="0.01" value="0" onchange="calcularTotales()"></td>
                <td><input type="checkbox" class="pagado"></td>
                <td><input type="date" class="fecha"></td>
                <td><input type="text" class="notas"></td>
            </tr>
            <tr>
                <td>ARENA PARA GATOS</td>
                <td><input type="number" class="monto" step="0.01" value="0" onchange="calcularTotales()"></td>
                <td><input type="checkbox" class="pagado"></td>
                <td><input type="date" class="fecha"></td>
                <td><input type="text" class="notas"></td>
            </tr>
            <tr>
                <td>SUPERMERCADO</td>
                <td><input type="number" class="monto" step="0.01" value="0" onchange="calcularTotales()"></td>
                <td><input type="checkbox" class="pagado"></td>
                <td><input type="date" class="fecha"></td>
                <td><input type="text" class="notas"></td>
            </tr>
            <tr>
                <td>PRESTAMOS</td>
                <td><input type="number" class="monto" step="0.01" value="0" onchange="calcularTotales()"></td>
                <td><input type="checkbox" class="pagado"></td>
                <td><input type="date" class="fecha"></td>
                <td><input type="text" class="notas"></td>
            </tr>
            <tr>
                <td>TARJETAS DE CREDITO</td>
                <td><input type="number" class="monto" step="0.01" value="0" onchange="calcularTotales()"></td>
                <td><input type="checkbox" class="pagado"></td>
                <td><input type="date" class="fecha"></td>
                <td><input type="text" class="notas"></td>
            </tr>
        </tbody>
    </table>
    
    <div class="summary">
        <div class="summary-item">
            <div>Remuneraci칩n</div>
            <div class="summary-value" id="resumen-remuneracion">$0.00</div>
        </div>
        <div class="summary-item">
            <div>Total Gastos</div>
            <div class="summary-value" id="resumen-gastos">$0.00</div>
        </div>
        <div class="summary-item">
            <div>Saldo Disponible</div>
            <div class="summary-value" id="resumen-saldo">$0.00</div>
        </div>
    </div>
    
    <div class="button-group">
        <button onclick="guardarDatos()">Guardar Datos</button>
        <button onclick="cargarDatos()">Cargar Datos</button>
        <button onclick="limpiarDatos()">Limpiar Mes</button>
    </div>
    
    <script>
        // Datos almacenados por mes y a침o
        let datosGuardados = {};
        
        // Obtener el mes y a침o actual
        function obtenerMesYAnioActual() {
            const fecha = new Date();
            document.getElementById('mes').value = fecha.getMonth() + 1;
            document.getElementById('anio').value = fecha.getFullYear();
        }
        
        // Calcular totales
        function calcularTotales() {
            const remuneracion = parseFloat(document.getElementById('remuneracion').value) || 0;
            let totalGastos = 0;
            
            // Sumar todos los montos
            document.querySelectorAll('.monto').forEach(input => {
                totalGastos += parseFloat(input.value) || 0;
            });
            
            // Actualizar resumen
            document.getElementById('resumen-remuneracion').textContent = `$${remuneracion.toFixed(2)}`;
            document.getElementById('resumen-gastos').textContent = `$${totalGastos.toFixed(2)}`;
            
            const saldo = remuneracion - totalGastos;
            const saldoElement = document.getElementById('resumen-saldo');
            saldoElement.textContent = `$${saldo.toFixed(2)}`;
            
            // Cambiar color seg칰n saldo
            if (saldo < 0) {
                saldoElement.className = 'summary-value negative';
            } else {
                saldoElement.className = 'summary-value positive';
            }
        }
        
        // Cambiar mes
        function cambiarMes() {
            const mes = document.getElementById('mes').value;
            const anio = document.getElementById('anio').value;
            const clave = `${anio}-${mes}`;
            
            // Guardar datos actuales antes de cambiar
            if (Object.keys(datosGuardados).length > 0) {
                guardarDatos();
            }
            
            // Cargar datos del nuevo mes
            cargarDatos();
        }
        
        // Guardar datos
        function guardarDatos() {
            const mes = document.getElementById('mes').value;
            const anio = document.getElementById('anio').value;
            const clave = `${anio}-${mes}`;
            
            const datos = {
                remuneracion: document.getElementById('remuneracion').value,
                filas: []
            };
            
            // Recoger datos de cada fila
            const filas = document.querySelectorAll('#tablaGastos tbody tr');
            filas.forEach(fila => {
                const celdas = fila.querySelectorAll('td');
                const categoria = celdas[0].textContent;
                const monto = fila.querySelector('.monto').value;
                const pagado = fila.querySelector('.pagado').checked;
                const fecha = fila.querySelector('.fecha').value;
                const notas = fila.querySelector('.notas').value;
                
                datos.filas.push({
                    categoria,
                    monto,
                    pagado,
                    fecha,
                    notas
                });
            });
            
            // Guardar en el objeto
            datosGuardados[clave] = datos;
            
            // Guardar en localStorage
            localStorage.setItem('controlGastos', JSON.stringify(datosGuardados));
            
            alert(`Datos guardados para ${mes}/${anio}`);
        }
        
        // Cargar datos
        function cargarDatos() {
            const mes = document.getElementById('mes').value;
            const anio = document.getElementById('anio').value;
            const clave = `${anio}-${mes}`;
            
            // Cargar de localStorage
            const datosStorage = localStorage.getItem('controlGastos');
            if (datosStorage) {
                datosGuardados = JSON.parse(datosStorage);
            }
            
            // Verificar si hay datos para este mes
            if (datosGuardados[clave]) {
                const datos = datosGuardados[clave];
                
                // Establecer remuneraci칩n
                document.getElementById('remuneracion').value = datos.remuneracion;
                
                // Establecer datos de cada fila
                const filas = document.querySelectorAll('#tablaGastos tbody tr');
                filas.forEach((fila, index) => {
                    if (datos.filas[index]) {
                        const filaDatos = datos.filas[index];
                        fila.querySelector('.monto').value = filaDatos.monto;
                        fila.querySelector('.pagado').checked = filaDatos.pagado;
                        fila.querySelector('.fecha').value = filaDatos.fecha;
                        fila.querySelector('.notas').value = filaDatos.notas;
                    }
                });
                
                alert(`Datos cargados para ${mes}/${anio}`);
            } else {
                // Limpiar si no hay datos
                limpiarDatos();
                alert(`No hay datos guardados para ${mes}/${anio}. Se ha creado un nuevo registro.`);
            }
            
            calcularTotales();
        }
        
        // Limpiar datos
        function limpiarDatos() {
            document.getElementById('remuneracion').value = '0';
            
            document.querySelectorAll('.monto').forEach(input => {
                input.value = '0';
            });
            
            document.querySelectorAll('.pagado').forEach(input => {
                input.checked = false;
            });
            
            document.querySelectorAll('.fecha').forEach(input => {
                input.value = '';
            });
            
            document.querySelectorAll('.notas').forEach(input => {
                input.value = '';
            });
            
            calcularTotales();
        }
        
        // Inicializar
        window.onload = function() {
            obtenerMesYAnioActual();
            cargarDatos();
        };
    </script>
</body>
</html>
